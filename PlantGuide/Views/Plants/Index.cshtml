@model IEnumerable<PlantGuide.Models.Plant>
@{
    ViewData["Title"] = "Список растений";
    var search = (string)ViewData["Search"];
    var careFilter = (string)ViewData["CareFilter"];
}

<div>
    <form method="get" class="controls" onsubmit="">
        <input name="search" value="@(search ?? "")" class="search-input" 
        placeholder="поиск по названию, научному названию, описанию" />
        <input name="careFilter" value="@(careFilter ?? "")" class="filter-input" placeholder="фильтр по инструкции" />
        <button type="submit" class="btn">Применить</button>
        <a class="btn secondary" href="@Url.Action("Index")">Сброс</a>
    </form>

    <div class="grid">
        @foreach (var plant in Model)
        {
            <div class="card-plant">
                <div class="thumb">
                    <img src="@Url.Content(plant.PhotoPath ?? "~/images/default.jpg")"
                         alt="@plant.Name"
                         class="img-fluid rounded"
                         style="max-height:200px; object-fit:cover; width:100%;" />
                </div>

                <div class="card-body">
                    <h3 class="card-title">@plant.Name</h3>
                    <div class="card-sub">@plant.ScientificName</div>
                    <div class="card-desc">@plant.Description</div>
                    <div class="card-care">Уход: @plant.CareInstructions</div>

                    <div class="card-actions">
                        <a class="btn-small btn-open" href="@Url.Action("Details", new { id = plant.Id })">Открыть</a>
                        <a class="btn-small btn-edit" href="@Url.Action("Edit", new { id = plant.Id })">Редактировать</a>
                        <form asp-action="Delete" asp-route-id="@plant.Id" method="post" style="display:inline">
                            <button type="submit" class="btn-small btn-delete" 
                            onclick="return confirm('Удалить растение?')">Удалить</button>
                        </form>
                    </div>
                </div>
            </div>
        }
    </div>
</div>